"use client";
import ProductRow from "@/app/components/main/ProductRow";
import { useGetCategories } from "@/app/lib/api";
import Link from "next/link";
import { useState } from "react";

const ProductsSection = () => {
    const [search, setSearch] = useState("");
    const { data } = useGetCategories({ search });

    return (
        <div className='relative z-2'>
            <div className='md:px-10 xxs:px-4 lg:pb-14 py-8  relative z-1 text-center bg-gray-150 block'>
                {data?.menu?.map(
                    (cat) =>
                        cat.number_of_product > 0 &&
                        !cat.parent && (
                            <div className='mb-10' key={cat._id}>
                                <div className='mb-8 flex items-baseline justify-between'>
                                    <h2 className='text-2xl font-medium tracking-wide uppercase'>
                                        {cat.name}
                                    </h2>
                                    <Link
                                        className='hidden md:flex items-center font-medium text-base gap-1'
                                        href={`/categorie/${cat.slug}`}
                                    >
                                        <svg
                                            width='28'
                                            height='16'
                                            viewBox='0 0 28 16'
                                            fill='none'
                                            xmlns='http://www.w3.org/2000/svg'
                                            aria-hidden='true'
                                        >
                                            <path
                                                d='M22.292 8.33638C22.579 8.20556 22.856 8.07115 23.1324 7.932L23.2368 7.88093C23.2747 7.87635 23.2652 7.87749 23.2794 7.87578L23.3315 7.86948L23.4263 7.85803C23.4981 7.84097 23.561 7.79766 23.6025 7.7366C23.6441 7.67555 23.6613 7.60117 23.6508 7.52807C23.6335 7.47158 23.5989 7.42195 23.5519 7.3862L23.4764 7.31842C23.4326 7.27856 23.392 7.23524 23.355 7.18888C23.3171 7.13837 23.276 7.09036 23.2319 7.04514L23.0308 6.85313C22.8992 6.71816 22.7602 6.59054 22.6145 6.47083C22.3208 6.22754 22.0324 5.94994 21.7097 5.70534C21.0463 5.19986 20.3484 4.74131 19.6211 4.33304C18.9599 3.97192 18.2788 3.6482 17.5813 3.36343C16.6759 2.95864 15.8253 2.44128 15.0495 1.82357C14.813 1.61662 14.9438 1.46622 15.2864 1.35753C15.7554 1.20113 16.2534 1.1508 16.7443 1.2102L18.2188 1.47904C18.6964 1.59621 19.1676 1.73822 19.6305 1.90449C20.6065 2.22839 21.5425 2.66193 22.4208 3.1968C22.9432 3.54225 23.5482 3.81522 24.1125 4.18925C24.3977 4.36148 24.6816 4.56271 24.9607 4.76451L25.0664 4.84307L25.1944 4.94777L25.4462 5.16248C25.624 5.30782 25.7909 5.46597 25.9456 5.63568C26.3179 6.01431 26.5973 6.47418 26.7617 6.9791C26.9096 7.47316 26.9029 8.00061 26.7425 8.49075C26.5647 8.97512 26.2747 9.41046 25.8962 9.76106C25.7073 9.93951 25.5054 10.1037 25.2922 10.2522L24.9907 10.4617L24.7616 10.5951C24.033 11.0468 23.2805 11.4587 22.5073 11.8289C21.3692 12.3942 20.2307 12.8779 19.1474 13.4991C18.3401 13.969 17.5598 14.4838 16.8101 15.0409C16.6463 15.1569 16.4936 15.2859 16.3233 15.3882C16.2515 15.4361 16.1763 15.4789 16.0985 15.5163C16.022 15.5321 15.9444 15.5415 15.8663 15.5443C15.7416 15.5655 15.6147 15.5711 15.4886 15.5611C15.259 15.5393 15.041 15.4503 14.8617 15.3052C14.7654 15.2465 14.6725 15.1823 14.5837 15.1129C14.3312 14.8934 14.3864 14.4349 14.6855 13.8076C14.7917 13.5921 14.9298 13.3939 15.0951 13.2197L15.5638 12.6824C15.8883 12.3452 16.2282 12.0157 16.5805 11.7087C16.9328 11.4018 17.285 11.0949 17.6608 10.8235C18.0366 10.5522 18.4399 10.3496 18.8262 10.1251C19.9919 9.46992 21.1326 8.88506 22.2266 8.27218L22.292 8.33638Z'
                                                fill='currentColor'
                                            ></path>
                                            <path
                                                d='M14.9616 8.71619C13.7251 8.54836 12.4853 8.38573 11.2463 8.26148C10.7943 8.21035 10.3443 8.24069 9.89233 8.18956L7.51331 7.91946C6.72011 7.82785 5.9315 7.77413 5.13658 7.66831C4.43349 7.60162 3.72984 7.57915 3.02844 7.60101C2.57889 7.60246 2.13778 7.64134 1.69323 7.6518L1.03768 7.66372L0.707622 7.65073L0.418392 7.65203C0.182552 7.64208 0.0721066 7.34299 0.23116 6.94403C0.351666 6.68886 0.51489 6.46911 0.710798 6.2983C0.906705 6.12749 1.13116 6.00922 1.37036 5.95077C2.28439 5.7602 3.20817 5.62772 4.13804 5.55383C4.59957 5.52209 5.0661 5.49936 5.53279 5.51026C6.00054 5.52247 6.46866 5.57026 6.93444 5.65332C8.05472 5.83038 9.21118 5.72428 10.3513 5.77398C11.606 5.83385 12.8564 5.92308 14.1113 6.01659L16.4244 6.19372C17.6087 6.28613 18.7635 6.42537 19.9239 6.44858C20.822 6.46984 21.7051 6.33429 22.5979 6.27927C22.7944 6.25552 22.9833 6.2327 23.1889 6.25112C23.9251 6.29193 24.1569 6.49465 24.3054 7.17368C24.346 7.32783 24.3793 7.48431 24.405 7.64232C24.4674 8.15872 24.1646 8.56543 23.6292 8.69743C23.2353 8.80911 22.8355 8.89274 22.4315 8.94791C22.0461 8.99448 21.6221 9.04572 21.2078 9.04771C20.3827 9.08013 19.5512 9.06043 18.711 9.03219C17.4695 8.98513 16.2173 8.88169 14.97 8.75362L14.9616 8.71619Z'
                                                fill='currentColor'
                                            ></path>
                                        </svg>
                                    </Link>
                                </div>
                                <ProductRow filterCategory={cat._id} />
                            </div>
                        )
                )}
            </div>
        </div>
    );
};

export default ProductsSection;
